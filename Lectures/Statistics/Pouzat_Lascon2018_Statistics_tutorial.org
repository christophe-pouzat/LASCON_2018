# -*- ispell-local-dictionary: "american" -*-
#+OPTIONS: ':nil *:t -:t ::t <:t H:3 \n:nil ^:nil arch:headline
#+OPTIONS: author:t broken-links:nil c:nil creator:nil
#+OPTIONS: d:(not "LOGBOOK") date:t e:t email:nil f:t inline:t num:t
#+OPTIONS: p:nil pri:nil prop:nil stat:t tags:nil tasks:t tex:t
#+OPTIONS: timestamp:t title:t toc:t todo:t |:t
#+TITLE: A glimpse of the Statistician's toolbox: Tutorial
#+AUTHOR: Christophe Pouzat
#+EMAIL: christophe.pouzat@parisdescartes.fr
#+DATE: LASCON, January 22 2018, Tutorial 2
#+LANGUAGE: en
#+SELECT_TAGS: export
#+EXCLUDE_TAGS: noexport
#+CREATOR: Emacs 25.3.1 (Org mode 9.0.9)
#+LaTeX_CLASS: koma-article
#+LaTeX_CLASS_OPTIONS: [koma,11pt]
#+LaTeX_HEADER: \usepackage{cmbright}
#+LaTeX_HEADER: \usepackage[round]{natbib}
#+LaTeX_HEADER: \usepackage{alltt}
#+LaTeX_HEADER: \usepackage[usenames,dvipsnames]{xcolor}
#+LaTeX_HEADER: \renewenvironment{verbatim}{\begin{alltt} \scriptsize \color{Bittersweet} \vspace{0.2cm} }{\vspace{0.2cm} \end{alltt} \normalsize \color{black}}
#+LaTeX_HEADER: \usepackage{listings}
#+LaTeX_HEADER: \lstloadlanguages{C,Gnuplot,bash,sh,R}
#+LaTeX_HEADER: \hypersetup{colorlinks=true,pagebackref=true}
#+STARTUP: indent
#+PROPERTY: header-args :eval no-export

* Setup :noexport:
#+NAME: org-latex-set-up
#+BEGIN_SRC emacs-lisp :results silent :exports none 
(setq smartparens-mode nil)
(require 'ox-latex)
(setq org-export-latex-listings t)
(setq org-latex-listings 'listings)
(setq org-latex-listings-options
        '(("frame" "lines")
          ("basicstyle" "\\footnotesize")
          ("numbers" "left")
          ("numberstyle" "\\tiny")))
(add-to-list 'org-latex-classes
          '("koma-article"
             "\\documentclass{scrartcl}"
             ("\\section{%s}" . "\\section*{%s}")
             ("\\subsection{%s}" . "\\subsection*{%s}")
             ("\\subsubsection{%s}" . "\\subsubsection*{%s}")
             ("\\paragraph{%s}" . "\\paragraph*{%s}")
             ("\\subparagraph{%s}" . "\\subparagraph*{%s}")))
(setq org-latex-pdf-process
      '("pdflatex -interaction nonstopmode -output-directory %o %f"
	"bibtex %b" 
	"pdflatex -interaction nonstopmode -output-directory %o %f" 
	"pdflatex -interaction nonstopmode -output-directory %o %f"))
#+END_SRC

#+NAME: set-gnuplot-pars
#+BEGIN_SRC gnuplot :session *gnuplot* :results silent :eval no-export :exports none 
set terminal pngcairo size 1000,1000
#+END_SRC

#+NAME: stderr-redirection
#+BEGIN_SRC emacs-lisp :exports none
;; Redirect stderr output to stdout so that it gets printed correctly (found on
;; http://kitchingroup.cheme.cmu.edu/blog/2015/01/04/Redirecting-stderr-in-org-mode-shell-blocks/
(setq org-babel-default-header-args:sh
      '((:prologue . "exec 2>&1") (:epilogue . ":"))
      )
(setq org-babel-use-quick-and-dirty-noweb-expansion t)
#+END_SRC

#+RESULTS: stderr-redirection
: t

* The ECDF :export:

** Getting Fatt and Katz data
To keep things "organized" I create a sub-directory that I call =data= before downloading the dataset there:

#+NAME: create-data-directory
#+BEGIN_SRC shell 
mkdir data
cd data
wget http://www.stat.cmu.edu/~larry/all-of-nonpar/=data/nerve.dat
#+END_SRC

It then a good idea to check that there is no obvious corruption (looking at the first 10 lines with program =head=):

#+NAME: check-Fatt-and-Katz-data
#+BEGIN_SRC shell :exports both :results output
head data/nerve.dat
#+END_SRC

#+RESULTS: check-Fatt-and-Katz-data
#+begin_example
0.21	0.03	0.05	0.11	0.59	0.06
0.18	0.55	0.37	0.09	0.14	0.19
0.02	0.14	0.09	0.05	0.15	0.23
0.15	0.08	0.24	0.16	0.06	0.11
0.15	0.09	0.03	0.21	0.02	0.14
0.24	0.29	0.16	0.07	0.07	0.04
0.02	0.15	0.12	0.26	0.15	0.33
0.06	0.51	0.11	0.28	0.36	0.14
0.55	0.28	0.04	0.01	0.94	0.73
0.05	0.07	0.11	0.38	0.21	0.49
#+end_example

The data are organized on 6 columns, the times (intervals between successive mEPPs, read from left to right and from top to bottom) are given in seconds. The number of lines in the file is:

#+NAME: Fatt-and-Katz-data-number-of-lines
#+BEGIN_SRC shell :exports both :results output
wc -l data/nerve.dat
#+END_SRC

#+RESULTS: Fatt-and-Katz-data-number-of-lines
: 134 data/nerve.dat

We also check the end of the file with program =tail=:

#+NAME: Fatt-and-Katz-data-tail
#+BEGIN_SRC shell :exports both :results output
tail data/nerve.dat
#+END_SRC

#+RESULTS: Fatt-and-Katz-data-tail
#+begin_example
0.07	0.19	0.11	0.10	0.17	0.24
0.01	0.13	0.21	0.03	0.39	0.01
0.27	0.19	0.02	0.21	0.04	0.10
0.06	0.48	0.12	0.15	0.12	0.52
0.48	0.29	0.57	0.22	0.01	0.44
0.05	0.49	0.10	0.19	0.44	0.02
0.72	0.09	0.04	0.02	0.02	0.06
0.22	0.53	0.18	0.10	0.10	0.03
0.08	0.15	0.05	0.13	0.02	0.10
0.51					
#+end_example

We therefore see that we have 133 lines with 6 numbers (making 798 measurements) and on line, the last, with a single number, making a total of 799 measurements.
